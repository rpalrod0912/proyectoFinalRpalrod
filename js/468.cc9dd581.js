(self["webpackChunkproyectofinal"]=self["webpackChunkproyectofinal"]||[]).push([[468],{9515:function(t,e,a){"use strict";a.r(e);var o=a(8081),n=a.n(o),r=a(3645),i=a.n(r),d=i()(n());d.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap);"]),d.push([t.id,".typeSubmit[data-v-5911ccee]{background-color:green;border-radius:10px;transition:.4s;color:#fff;border:1px solid green;font-family:Noto Sans;font-style:normal;font-weight:600;font-size:1rem;padding:.4rem;padding-left:1.2rem;padding-right:1.2rem;cursor:pointer}.typeSubmit[data-v-5911ccee]:hover{transform:scale(1.07)}.putDataSubmit[data-v-5911ccee]{display:flex;align-items:center;justify-items:center;justify-content:center;align-content:center;width:100%;height:3.2rem;background-color:#242424;color:#fff;border:1px solid #000;border-radius:10px;transition:.4s;font-family:Noto Sans;font-style:normal;margin-bottom:1rem;font-weight:600;font-size:1.2rem}.updateData h1[data-v-5911ccee]{padding-bottom:3rem}.updateData label[data-v-5911ccee]{margin-top:.6rem;margin-bottom:.6rem}.updateData .saveDataButton[data-v-5911ccee]{width:20rem}.selectedMenu .updateData .dateInput p[data-v-5911ccee]{bottom:5.3em}.pd-3rem[data-v-5911ccee]{padding-right:2.3rem}.updateData[data-v-5911ccee],.updateSec1[data-v-5911ccee]{flex-direction:column}.updateData[data-v-5911ccee]{display:flex;align-items:center}.updateData h1[data-v-5911ccee],.updateData h2[data-v-5911ccee],.updateData input[type=date][data-v-5911ccee],.updateData input[type=email][data-v-5911ccee],.updateData input[type=password][data-v-5911ccee],.updateData input[type=radio][data-v-5911ccee],.updateData input[type=text][data-v-5911ccee]{padding:1.2rem}.updateData .labelUpdateDataError p[data-v-5911ccee]{position:relative;bottom:5.3em;left:1.5em;transition:.3s;font-size:.8rem;color:red}.updateData .labelUpdateDataError h1[data-v-5911ccee]{position:relative;bottom:7em;left:1.5em;height:.1rem;font-size:.8rem;color:red}.updateData .labelUpdateDataError .inputUpdateData[data-v-5911ccee]{margin:.4rem;background-color:#f9f9f9;border:none;padding-top:1.7rem;border-bottom:2px solid red;transition:.07s;font-size:.9rem;border-radius:4px}.updateData .labelUpdateDataError .inputUpdateData:not(:focus):invalid~p[data-v-5911ccee]{bottom:3rem;left:1.2rem;font-size:1rem}.updateData .labelUpdateDataError .inputUpdateData[data-v-5911ccee]:invalid:focus{border-bottom:2px solid red}.updateData .labelUpdateDataError .inputUpdateData[data-v-5911ccee]:focus{outline:none;border-bottom:2px solid red}.updateData .labelUpdateData p[data-v-5911ccee]{position:relative;bottom:5.3em;left:1.5em;transition:.3s;font-size:.8rem}.updateData .labelUpdateData h1[data-v-5911ccee]{position:relative;bottom:7em;left:1.5em;height:.1rem;font-size:.8rem}.updateData .labelUpdateData .inputUpdateDataError[data-v-5911ccee]{margin:.4rem;background-color:#f9f9f9;border:none;padding-top:1.7rem;border-bottom:1px solid #c8c8c8;transition:.07s;font-size:.9rem;border-radius:4px;border-bottom:2px solid red}.updateData .labelUpdateData .inputUpdateDataError~p[data-v-5911ccee]{color:red}.updateData .labelUpdateData .inputUpdateDataError:focus~p[data-v-5911ccee]{position:relative;bottom:5.3em;left:1.5em;transition:.3s;font-size:.8rem}.updateData .labelUpdateData .inputUpdateDataError[data-v-5911ccee]:focus{outline:none}.updateData .labelUpdateData .inputUpdateDataError:not(:focus):invalid~p[data-v-5911ccee]{bottom:3rem;left:1.2rem;font-size:1rem}.updateData .labelUpdateData .inputUpdateDataError:valid~p[data-v-5911ccee]{position:relative;bottom:5.3em;left:1.5em;transition:.3s;font-size:.8rem}.updateData .labelUpdateData .inputUpdateData[data-v-5911ccee]{margin:.4rem;background-color:#f9f9f9;border:none;padding-top:1.7rem;border-bottom:1px solid #c8c8c8;transition:.07s;font-size:.9rem;border-radius:4px}.updateData .labelUpdateData .inputUpdateData:not(:focus):invalid~p[data-v-5911ccee]{bottom:3rem;left:1.2rem;font-size:1rem}.updateData .labelUpdateData .inputUpdateData[data-v-5911ccee]:invalid:focus{border-bottom:2px solid red}.updateData .labelUpdateData .inputUpdateData[data-v-5911ccee]:focus{outline:none;border-bottom:2px solid green}.updateData .genderDiv[data-v-5911ccee]{display:flex;flex-wrap:wrap;align-items:center}.updateData .genderDiv input[type=radio][data-v-5911ccee],.updateData .genderDiv label[data-v-5911ccee]{padding:.3rem}.updateData .updateSec2 input[type=date][data-v-5911ccee]{padding-left:5rem}.updateData div[data-v-5911ccee]{display:flex;flex-wrap:wrap;justify-content:center;align-items:baseline}.updateData .infoPanel[data-v-5911ccee]{display:flex;align-items:center;justify-items:center;justify-content:flex-start;align-content:center;border-radius:10px;margin-bottom:2rem;width:100%;padding-top:1rem;padding-bottom:1rem;flex-direction:row;flex-wrap:nowrap;background-color:red}.updateData .infoPanel p[data-v-5911ccee]{width:78%;position:inherit;padding-right:1rem;font-size:.9rem;font-family:Noto Sans;font-style:normal;font-weight:700;color:#fff}.updateData .infoPanel img[data-v-5911ccee]{width:2rem;padding-right:1rem;padding-left:1rem}.infoPanel[data-v-5911ccee]{display:flex;align-items:center;justify-items:center;justify-content:flex-start;align-content:center;border-radius:10px;margin-bottom:2rem;width:100%;padding-top:1rem;padding-bottom:1rem;flex-direction:row;flex-wrap:nowrap;background-color:red}.infoPanel p[data-v-5911ccee]{width:78%;position:inherit;padding-right:1rem;font-size:.9rem;font-family:Noto Sans;font-style:normal;font-weight:700;color:#fff}.infoPanel img[data-v-5911ccee]{width:2rem;padding-right:1rem;padding-left:1rem}",""]),e["default"]=d},9261:function(t,e,a){"use strict";a.r(e);var o=a(8081),n=a.n(o),r=a(3645),i=a.n(r),d=i()(n());d.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap);"]),d.push([t.id,".loadingUserInfo{margin-top:20rem}.loadingUserInfo,.showAccountInfo{display:flex;align-items:center;justify-content:center}.showAccountInfo{font-family:Noto Sans;font-style:normal;font-weight:600;padding-top:10rem;width:70%;flex-direction:column}.showAccountInfo .colorButton{background-color:#fff;transition:.4s;border-radius:1px solid #242424}.showAccountInfo .colorButton p{color:#242424}.showAccountInfo .colorButton:hover{background-color:#242424;scale:1.03;border-radius:1px solid #242424}.showAccountInfo .colorButton:hover p{color:#fff}@media(max-width:899px){.showAccountInfo{width:100%}}.saveDataButton{width:30rem;margin-bottom:1rem}.selectedMenu{font-family:Noto Sans;font-style:normal;font-weight:600;padding-top:2rem}section{display:flex}",""]),e["default"]=d},468:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return it}});var o=a(3396);const n={key:1},r={class:"showAccountInfo"},i={key:2,class:"loadingUserInfo"};function d(t,e,a,d,s,l){const p=(0,o.up)("WhiteHeader"),c=(0,o.up)("PopUpModal"),u=(0,o.up)("UserUpdateMail"),m=(0,o.up)("RightDesktopMenu"),f=(0,o.up)("LoadingSpinner");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p,{class:"headerPasarela",tipo:"backHeader"}),this.showPopUp?((0,o.wg)(),(0,o.j4)(c,{key:0,"is-opened":!0,msj:"CORREO ELECTRÓNICO ACTUALIZADO CORRECTAMENTE"})):(0,o.kq)("",!0),s.carga?((0,o.wg)(),(0,o.iD)("section",n,[(0,o._)("div",r,[(0,o.Wm)(u,{onChangePopUpState:l.setToTrue,userData:this.userData,class:"selectedMenu"},null,8,["onChangePopUpState","userData"])]),(0,o.Wm)(m,{selectedOption:"secondOption",userData:this.userData},null,8,["userData"])])):((0,o.wg)(),(0,o.iD)("section",i,[(0,o.Wm)(f)]))],64)}var s=a(6193),l=a(6264),p=a(4161),c=a(4219),u=a(8612),m=a(3237),f=a(5586),h=a(6061),g=a(805),w=a(375),D=a(9242),v=a(7139),b=a(716);const y=t=>((0,o.dD)("data-v-5911ccee"),t=t(),(0,o.Cn)(),t),U=y((()=>(0,o._)("h1",null,"ACTUALIZAR EMAIL",-1))),x={class:"updateSec1"},I=y((()=>(0,o._)("div",{class:"borderBottom"},null,-1))),P={id:"labelNewPwd",class:"labelUpdateData",for:"newPwd"},M={id:"labelConfirmNewPwd",class:"labelUpdateData",for:"confirmNewPwd"},_={key:0,class:"infoPanel"},k=y((()=>(0,o._)("img",{src:b,alt:"imagenInformativa"},null,-1))),$=y((()=>(0,o._)("p",null,"Contraseña Incorrecta",-1))),C=[k,$],A={key:1,class:"infoPanel"},S=y((()=>(0,o._)("img",{src:b,alt:"imagenInformativa"},null,-1))),E=y((()=>(0,o._)("p",null,"Email Antiguo Incorrecto",-1))),q=[S,E],z={key:2,class:"infoPanel"},N=y((()=>(0,o._)("img",{src:b,alt:"imagenInformativa"},null,-1))),Z=y((()=>(0,o._)("p",null,"Ese correo ya está en uso por otro usuario",-1))),T=[N,Z],O={key:3,class:"infoPanel"},R=y((()=>(0,o._)("img",{src:b,alt:"imagenInformativa"},null,-1))),j=y((()=>(0,o._)("p",null," Se necesita un inicio de sesion reciente, por favor inicia sesion de nuevo ",-1))),L=[R,j],B={key:4,class:"infoPanel"},W=y((()=>(0,o._)("img",{src:b,alt:"imagenInformativa"},null,-1))),H=y((()=>(0,o._)("p",null,"Utiliza un formato correcto de email",-1))),V=[W,H],F=y((()=>(0,o._)("input",{type:"submit",class:"putDataSubmit",value:"GUARDAR"},null,-1)));function G(t,e,a,n,r,i){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("form",{onSubmit:e[6]||(e[6]=(0,D.iM)((t=>i.emailUpdate()),["prevent"])),class:"updateData",novalidate:""},[U,(0,o._)("div",x,[(0,o._)("label",{id:"labelOldPwd",class:(0,v.C_)(!0===r.v$.pwd.$error?"labelUpdateDataError":"labelUpdateData"),for:"oldPwd"},[(0,o.wy)((0,o._)("input",{class:"inputUpdateData","onUpdate:modelValue":e[0]||(e[0]=t=>this.pwd=t),name:"oldPwd",type:"password",id:"pwdDataInput",required:""},null,512),[[D.nr,this.pwd]]),(0,o._)("p",{onClick:e[1]||(e[1]=t=>i.focusInput("pwdDataInput","labelOldPwd"))}," Antigua Contraseña "),I],2),(0,o._)("label",P,[(0,o.wy)((0,o._)("input",{class:(0,v.C_)(!0===r.v$.oldMail.$error?"inputUpdateDataError":"inputUpdateData"),"onUpdate:modelValue":e[2]||(e[2]=t=>this.oldMail=t),name:"oldMail",type:"text",id:"newPwdDataInput",required:""},null,2),[[D.nr,this.oldMail]]),(0,o._)("p",{onClick:e[3]||(e[3]=t=>i.focusInput("newPwdDataInput","labelNewPwd"))}," Antiguo Email ")]),(0,o._)("label",M,[(0,o.wy)((0,o._)("input",{class:(0,v.C_)(!0===r.v$.newMail.$error?"inputUpdateDataError":"inputUpdateData"),name:"newMail","onUpdate:modelValue":e[4]||(e[4]=t=>this.newMail=t),type:"text",id:"confirmNewPwdDataInput",required:""},null,2),[[D.nr,this.newMail]]),(0,o._)("p",{onClick:e[5]||(e[5]=t=>i.focusInput("confirmNewPwdDataInput","labelNewPwd"))}," Nuevo Email ")])]),this.validPwd?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",_,C)),r.v$.oldMail.$error?((0,o.wg)(),(0,o.iD)("div",A,q)):(0,o.kq)("",!0),r.emailOcupado?((0,o.wg)(),(0,o.iD)("div",z,T)):(0,o.kq)("",!0),r.recentAuth?((0,o.wg)(),(0,o.iD)("div",O,L)):(0,o.kq)("",!0),r.v$.newMail.$error?((0,o.wg)(),(0,o.iD)("div",B,V)):(0,o.kq)("",!0),F],32)])}a(7658);var Y=a(5420),J=a(3854);a(8958);const K=Y.BM.regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,24}$/),Q=async t=>{const e=s.I8.currentUser,a=J.w9.credential(s.I8.currentUser.email,t);let o;return await(0,s.aF)(e,a).then((t=>{o=!0})).catch((t=>{o=!1})),o};var X={name:"UserUpdateMail",data(){return{v$:(0,c.ZP)(),pwd:"",oldMail:"",newMail:"",exito:!1,validPwd:!0,emailOcupado:!1,recentAuth:!1}},props:{userData:Object},emits:{changePopUpState:null},validations(){return{pwd:{required:Y.C1,passwordRegex:K},oldMail:{required:Y.C1,sameAs:(0,Y.sH)(this.userData.mail)},newMail:{required:Y.C1,email:Y.Do}}},methods:{async logOut(){await(0,s.w7)(s.I8).then((()=>{this.$store.commit("setCurrentAuth",!1),this.$store.commit("setCurrentUser",null),this.$store.commit("setCurrentCartLength",null),this.$store.commit("setCurrentMail",null),setInterval((()=>{this.$router.push({name:"login",query:{email:this.newMail}}).then((()=>{this.$router.go()}))}),2e3)})).catch((t=>{}))},async emailUpdate(){this.v$.$validate(),!this.v$.$error&&await Q(this.pwd)&&(await this.putData(),!0===this.exito&&(this.$emit("changePopUpState",!0),await this.logOut())),await Q(this.pwd)||(this.validPwd=!1),this.v$.$validate()},async putData(){let t;const e={mail:this.newMail};await(0,s.s)(s.I8.currentUser,this.newMail).then((async()=>{this.emailOcupado=!1,this.recentAuth=!1;await p.Z.put(`${u.API_URL}users/${this.userData.idUser}`,e).then((e=>t=e.status)).catch((t=>t))})).catch((t=>{"Firebase: Error (auth/requires-recent-login)."===t.message&&(this.recentAuth=!0),"Firebase: Error (auth/email-already-in-use)."===t.message&&(this.emailOcupado=!0)})),200===t&&(this.exito=!0)},focusInput(t,e){const a=document.querySelector(`#${t}`);document.activeElement!==a&&a.focus()},showPassword(t,e){let a=document.querySelector(`#${t}`);"password"===a.type?(a.type="text","modoTextoInput1"===e&&(this.modoTextoInput1=!0),"modoTextoInput2"===e&&(this.modoTextoInput2=!0)):(a.type="password",this.dataState=!1,"modoTextoInput1"===e&&(this.modoTextoInput1=!1),"modoTextoInput2"===e&&(this.modoTextoInput2=!1))}},components:{ButtonComponent:g.Z}},tt=(a(2824),a(89));const et=(0,tt.Z)(X,[["render",G],["__scopeId","data-v-5911ccee"]]);var at=et,ot=a(5930),nt={name:"UserUpdateMailView",data(){return{userData:null,carga:!1,showPopUp:!1}},async mounted(){document.querySelector("body").classList.contains("bodyStyle")&&document.querySelector("body").classList.toggle("bodyStyle"),await this.getUserData(),this.carga=!0},methods:{async getUserData(){this.carga=!1;const t=await p.Z.get(`${u.API_URL}users/email/${this.$store.state.currentMail}`).then((t=>t.data)).catch((t=>t));this.userData=t},setToTrue(t){this.showPopUp=t}},components:{WhiteHeader:f.Z,LoadingSpinner:l.Z,UserInformation:m.Z,RightDesktopMenu:h.Z,ButtonComponent:g.Z,UserUpdatePassword:w.Z,UserUpdateMail:at,PopUpModal:ot.Z}};a(3480);const rt=(0,tt.Z)(nt,[["render",d]]);var it=rt},2824:function(t,e,a){var o=a(9515);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=a(7037).Z;n("697b19bb",o,!0,{sourceMap:!1,shadowMode:!1})},3480:function(t,e,a){var o=a(9261);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=a(7037).Z;n("cdcf20a4",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=468.cc9dd581.js.map